extends ../layout.pug

block content
  .labels-content-container(style='position: relative; min-height: 60px;')
    if success && success.length
      each msg in success
        div.alert.alert-success.mt-3(style='position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 60%; z-index: 10; background: #e3f2fd; color: #1976d2; border: 1px solid #90caf9; margin-bottom: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);')= msg
    if error && error.length
      each msg in error
        div.alert.alert-danger.mt-3(style='position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 60%; z-index: 10; margin-bottom: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);')= msg
    h1.mb-4= t('layouts.application.labels')
    if typeof user !== 'undefined' && user
      .d-flex.justify-content-start.mb-3
        a.btn.btn-primary(href="/labels/new")= t('labels.index.newLabel')
    else
      .card.mt-4.p-4.shadow-sm(style='max-width:400px;')
        h4.mb-3= t('loginRequired')
        form(action='/session', method='post')
          .mb-3
            label.form-label(for='email')= t('Email')
            input.form-control(type='email', name='email', id='email', required)
          .mb-3
            label.form-label(for='password')= t('Password')
            input.form-control(type='password', name='password', id='password', required)
          button.btn.btn-primary(type='submit')= t('Login')
    if user
    table.table.table-striped.mt-3

    h1 Метки
    table.table.table-striped
      thead
        tr
          th= t('labels.index.name')
          // th= t('labels.index.actions')
      tbody
        each label in labels
          tr
            td= label.name
            td.text-end
              div.d-inline-flex.align-items-center.gap-1
                a.btn.btn-sm.btn-outline-primary(href=`/labels/${label.id}/edit`)= t('users.index.Edit')
                form(action=`/labels/${label.id}/delete`, method='POST', style='display:inline; margin:0;')
                  button.btn.btn-sm.btn-label-delete(type='submit' style='background: #fff; color: #e57373; border: 1px solid #e57373;')= t('users.index.Delete')
