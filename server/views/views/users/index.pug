extends ../layout

block content
  .d-flex.justify-content-between.align-items-center.mb-3
    h1= t('layouts.application.users')
    a.btn.btn-primary(href=`/users/new?lang=${typeof currentLang !== 'undefined' ? currentLang : 'en'}`)= t('users.index.newUser')
  if users.length
    table.table.table-striped.table-hover.mt-4
      thead
        tr
          if typeof currentLang !== 'undefined' && currentLang === 'ru'
            th Имя
            th Email
            th
            th
          else
            th Name
            th Email
            th
            th
      tbody
        each user in users
          tr
            td
              | #{user.firstName} #{user.lastName}
            td= user.email
            td
              if currentUser && (currentUser.id === user.id || currentUser.role === 'admin')
                a.btn.btn-sm.btn-outline-primary(href=`/users/${user.id}/edit?lang=${typeof currentLang !== 'undefined' ? currentLang : 'en'}`)= t('users.index.Edit')
            td
              if currentUser && currentUser.role === 'admin' && user.role === 'user'
                form(action=`/users/${user.id}?lang=${typeof currentLang !== 'undefined' ? currentLang : 'en'}`, method='post', style='display: inline;')
                  input(type='hidden', name='_method', value='delete')
                  button.btn.btn-sm(type='submit' style='background: #fff; color: #e57373; border: 1px solid #e57373;')= t('users.index.Delete')
  else
    div.alert.alert-info.mt-4= t('noUsersYet')