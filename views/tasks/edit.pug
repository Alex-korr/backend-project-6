extends ../layout.pug

block content
  h1 Edit Task
  if error.length
    each msg in error
      .alert.alert-danger= msg
  if success.length
    each msg in success
      .alert.alert-success(style='background: #e3f2fd; color: #1976d2; border: 1px solid #90caf9;')= msg
  form(method='post', action=`/tasks/${task.id}?_method=patch`)
    .form-group
      label(for='name') Name
      input#name.form-control(type='text', name='name', required, value=task.name)
    .form-group
      label(for='description') Description
      textarea#description.form-control(name='description')= task.description
    .form-group
      label(for='statusId') Status
      select#statusId.form-control(name='statusId', required)
        option(value='') Select status
        each status in statuses
          option(value=status.id selected=(task.statusId==status.id))= status.name
    .form-group
      label(for='executorId') Executor
      select#executorId.form-control(name='executorId')
        option(value='') Not assigned
        each user in users
          option(value=user.id selected=(task.executorId==user.id))= user.name
    .form-group
      label(for='labels') Метки
      select#labels.form-control(name='labels' multiple)
        each label in labels
          option(value=label.id selected=(task.labels && task.labels.some(l => l.id === label.id)))= label.name
    button.btn.btn-primary(type='submit') Save
    a.btn.btn-secondary(href='/tasks') Cancel
